//
// Expertinfos Sectoriel theme's newsletter
// v3.0 | 2015-06-23 10:45
// --------------------------------------------------


//Propriétés mso-* utilisées dans Outlook
//Debug outlook : http://www.verticalresponse.com/blog/its-not-you-its-outlook-the-complete-guide-for-email-marketers/

// Débuggage à effectuer :
// - Live Mail							=> OK résolu
// - Lotus Notes 8.5					=> OK résolu
// - Outlook 2003, 2007, 2010, 2013		=> OK résolu
// - Gmail Android						=> OK résolu
// - Gmail IOS7							=> OK résolu
// - Orange.fr Win						=> OK résolu
// - Outlook.com All OS					=> Chiffre, question, rappel : multilines et dimension : vérifier en interne
// - Yahoo Chrome Mac					=> OK résolu
// - Yahoo Chrome Win					=> OK résolu
// - Yahoo Firefox Mac					=> OK résolu
// - Yahoo Firefox Win					=> OK résolu


// LAYOUT
// --------------------------------------------------

h1, h2, h3, h4, h5, h6 { mso-line-height-rule: exactly; }
h1 { line-height: (@headingsFontSizeH1 * 1.1); }
h2 { line-height: (@headingsFontSizeH2 * 1.1); }
h3 { line-height: (@headingsFontSizeH3 * 1.1); }
h4 { line-height: (@headingsFontSizeH4 * 1.1); }
h5 { line-height: (@headingsFontSizeH5 * 1.1); }
h6 { line-height: (@headingsFontSizeH6 * 1.1); }

h1, h2, h3, h4, h5, h6 {
	a { .newsletterLinkColor(@nlHeadings); }
}

.header {
	//suppression décalage en trop
	td.wrapper { padding-top: 0px; }
	table.columns td, table.column td { padding-bottom: 0px; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .header {
		td.wrapper { padding-top: 0px !important; }
		table.columns td, table.column td { padding-bottom: 0px !important; }
	}
}

//pour rajouter de l'espace en haut et en dessous des wrappers
.filler {
	&, .empty {
		mso-line-height-rule: exactly;
		line-height: 0px;
		font-size: 0px;
	}
	.empty { margin: 0px; }
}

//sur titres
.preTitle {
	//décalage si précédé
	* + & { padding-top: 10px; }
}

//tous les container de texte
.text {
	//décalage si précédé
	* + & { padding-top: 5px; }
}

//lien de suivis
.readMore {
	width: 100%;
	-premailer-width: 100%;
	overflow: hidden;
	clear: both;

	table.columns &, table.column & {
		td.buttonWrapper {
			padding-bottom: 0px;
			clear: both;
		}
		table.tiny-button {
			display: table;
			table-layout: auto;
			width: auto;
			-premailer-width: auto;
			float: right;
			td {
				width: auto;
				float: none;
				-premailer-width: auto;
				padding: 4px 8px;
				text-transform: uppercase;
				vertical-align: middle;
				//pour les éventuels paragraphes vides rajoutés par Outlook
				a, p { margin: 0px !important; padding: 0px !important; }
			}
		}
	}
	.text + & {
		table.columns &, table.column & {
			td.buttonWrapper { padding-top: 5px; }
		}
	}
}
a.tiny-button-link {
	padding: 0px;
	margin: 0px;
	line-height: ceil(@buttonFontSizeTiny * 1.33);
	mso-line-height-rule: exactly;
}
table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
	//pour Outlook
	&, p.MsoNormal {
		line-height: ceil(@buttonFontSizeTiny * 1.33) !important;
		mso-line-height-rule: exactly;
		margin: 0px;
	}
	p.MsoNormal { padding: 0px; }
}
a.tiny-button-link, table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
	font-size: @buttonFontSizeTiny;
	font-weight: normal;
}

@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		table.columns, table.column {
			.readMore {
				td.buttonWrapper { padding-bottom: 0px !important; }
				table.tiny-button {
					display: table !important;
					table-layout: auto !important;
					width: auto !important;
					td {
						width: auto !important;
						padding: 4px 8px !important;
					}
				}
			}
		}
		a.tiny-button-link, table.columns .readMore td.buttonWrapper td, table.column .readMore td.buttonWrapper td {
			font-size: @buttonFontSizeTiny !important;
			line-height: ceil(@buttonFontSizeTiny * 1.33) !important;
		}
	}
}


//gestion row avec bordures de séparation
.row.bordered {
	//suppression décalage en trop
	td.wrapper { padding-top: 0px; }
	table.columns td, table.column td { padding-bottom: 0px; }
	td {
		line-height: 0px;
		hr.border {
			margin: 0px;
			//débuggage bordure pour PostaNova
			background-color: transparent;
			height: 0px;
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .row.bordered {
		td.wrapper { padding-top: 0px !important; }
		table.columns td, table.column td { padding-bottom: 0px !important; }
	}
}


//réseaux sociaux
.faicons {
	vertical-align: bottom;
	td { text-align: right; }
}
.faicon {
	display: inline;
	//pour supprimer les espaces
	font-size: 0px;
	mso-line-height-rule: exactly;
	line-height: 0px;
	padding: 0px 5px 5px 5px;
	&.first { padding-left: 0px; }
	&.last { padding-right: 0px; }
	img, img& {
		display: inline;
		float: none;
	}
	img& {
		padding: 2px;
		vertical-align: top;
	}
}

@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		.faicons { vertical-align: baseline !important; }
		.faicon img, img.faicon {
			width: 15px !important;
			height: 15px !important;
		}
	}
}


// contentOnline area
// -------------------------
.contentOnline {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }

	//suppression fontSize et lineHeight pour débug Outlook
	table.columns td, table.column td {
		mso-line-height-rule: exactly;
		line-height: 0px;
		font-size: 0px;
	}

	//remise en place taille texte directement sur éléments
	.online, .name {
		mso-line-height-rule: exactly;
		line-height: @baseLineHeight;
		font-size: @baseFontSize;
	}

	.online {
		display: block;
		padding-bottom: 5px;
	}
	.name { display: block; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
		.online { padding-bottom: 0px !important; }

		//pour forcer centrage contenu trop petit
		.columns, .column { display: table !important; }
	}
}


// contentSecteur area
// -------------------------
.contentSecteur {
	.newsletterInnerTextColor(#fff);
	&, td.expander { -premailer-background: e("**((secteur_color))**"); }

	//pour l'affichage des tests
	.contentSecteur-loop(@list, @index: 1) when (@index <= length(@list)) {
		//extraction du motif
		@testa-motif: extract(@list, @index);
		//extraction de la couleur
		@testa-color: ~"secteur-section-color-@{testa-motif}";
		&.secteur-@{testa-motif} { &, td.expander { background-color: @@testa-color; } }
		//boucle suivante
		.contentSecteur-loop(@list, (@index + 1));
	}
	.contentSecteur-loop(@secteur-section-motifs);

	//changement padding vertical
	table.columns td, table.column td { padding-bottom: 0px; }

	td {
		font-weight: normal;
		font-weight: 200;
		font-size: (@wrapperPad * 2);
		line-height: (@wrapperPad * 2);
		.secteur {
			font-weight: bold;
			font-weight: 500;
			text-transform: uppercase;
			word-break: keep-all;
			white-space: nowrap;
			.dash { margin: 0 -.25em; }
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentSecteur {
		table.columns td, table.column td { padding-bottom: 0px !important; }

		td {
			font-size: (@wrapperPadCollapse * 3) !important;
			line-height: (@wrapperPadCollapse * 3) !important;
			text-align: left !important;

			.essentiel { display: block !important; }
			.secteur {
				word-break: normal !important;
				white-space: normal !important;
				display: block !important;
				text-align: right;
			}
		}
	}
}


// contentDateInfo area
// -------------------------
.contentDateInfo {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }

	.info {
		td { text-transform: uppercase; }
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentDateInfo {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// contentEtude area
// -------------------------
.contentEtude {
	//pour rajouter de l'espace en haut et en dessous des wrappers
	.filler {
		height: @wrapperPad;
		-premailer-height: @wrapperPad;
	}

	.value {
		font-size: @headingsFontSizeH2;
		line-height: @headingsFontSizeH2;
		font-weight: normal;
		font-weight: 500;
	}

	//suppression padding vertical
	table.columns td, table.column td { padding-bottom: 0px; }
	.wrapper {
		padding-top: 0px;

		//rajout bordures verticales
		&:not(.first) {
			//réduction largeur tableau 6 colonnes de 1px pour compenser
			.columns.four { width: (3 * @gutterWidth + 4 * @columnWidth - 1px); }
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtude {
		//masquage des fillers
		.filler {
			height: 0px !important;
			display: none !important;
			visibility: hidden !important;
		}

		//rajout bordures horizontales
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse - 1px) !important; }

		//pas de sélecteur :not car il n'est pas géré partout et le style mobile n'est pas inliné
		.wrapper {
			border-left: 0px !important;

			//déplacement du padding sur les wrappers
			.text-pad {
				padding-left: 0px !important;
				padding-right: 0px !important;
			}
			padding-left: @textPadCollapse !important;
			padding-right: @textPadCollapse !important;

			//suppression bordure sur le dernier
			&.last {
				table.columns td, table.column td {
					padding-bottom: @columnPadCollapse !important;
					border-bottom: 0px !important;
				}
			}

			//alignement du texte
			td {
				text-align: left !important;
				vertical-align: middle !important;
			}
		}

		//déplacement du titre à droite de la valeur
		.value, .text {
			display: inline !important;
			vertical-align: middle !important;
		}
		.text {
			padding-top: 0px !important;
			padding-left: 10px !important;
		}
	}
}


// contentContact area
// -------------------------
.contentContact {
	//réduction décalage vertical en bas
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// footer area
// -------------------------
.footer {
	//réduction décalage vertical en haut
	td.wrapper { padding-top: (@wrapperPad / 2); }
	table.columns td, table.column td { padding-bottom: (@columnPad / 2); }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentOnline {
		td.wrapper { padding-top: (@wrapperPadCollapse / 2) !important; }
		table.columns td, table.column td { padding-bottom: (@columnPadCollapse / 2) !important; }
	}
}


// DEFAULT COLORS
// --------------------------------------------------
//couleurs de la newsletter figée, donc on reste sur des couleurs fixes


// Body
// -------------------------
body, table.body {
	background: @nlBodyBackground;
	//rajout pour suppression paramètre doublon via compiler
	// background-image: url("-premailer-bgdebug");
}


// Header
// -------------------------
//pour supprimer toute zone blanche avant chargement header
.header {
	&, td.expander { background: @nlBodyBackground; }
}


// Sur-titres
// -------------------------
.preTitle {
	color: @nlPreTitle;
	a { .newsletterLinkColor(@nlPreTitle); }
}



// contentOnline area
// -------------------------
.contentOnline {
	&, td.expander { background: @nlCntOnlineBackground; }
	.newsletterInnerTextColor(@nlCntOnlineText);
	.online {
		color: @nlCntOnlineText;
		a { .newsletterLinkColor(@nlCntOnlineText); }
	}
	.name {
		color: @nlCntOnlineName;
		a { .newsletterLinkColor(@nlCntOnlineName); }
	}
}

// contentDateInfo area
// -------------------------
.contentDateInfo {
	.date {
		&, td.expander { background: @nlCntDtiDateBackground; }
		.newsletterInnerTextColor(@nlCntDtiDateText);
	}
	.info {
		&, td.expander { background: @nlCntDtiInfoBackground; }
		.newsletterInnerTextColor(@nlCntDtiInfoText);
	}
}

// contentCabInform area
// -------------------------
.contentCabInform {
	&, td.expander { background: @nlCntCabBackground; }
	.title {
		color: @nlCntCabTitle;
		a { .newsletterLinkColor(@nlCntCabTitle); }
	}
	.text, .readMore { color: @nlCntCabText; }
	.newsletterInnerTextColor(@nlCntCabText);
	.readMore table.tiny-button {
		td {
			background: @nlCntCabReadMoreBackground;
			border-color: @nlCntCabReadMoreBorder;
			&, a { color: @nlCntCabReadMoreText; }
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntCabReadMoreBackgroundHover !important;
			a { color: @nlCntCabReadMoreText !important; }
		}
		td a:visited { color: @nlCntCabReadMoreText !important; }
	}
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			&, a { color: @nlCntUneReadMoreText; }
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			a { color: @nlCntUneReadMoreText !important; }
		}
		td a:visited { color: @nlCntUneReadMoreText !important; }
	}
}


// contentArticles area
// -------------------------
.contentArticles {
	&, td.expander { background: @nlCntArtBackground; }
	.readMore table.tiny-button {
		td {
			background: @nlCntArtReadMoreBackground;
			border-color: @nlCntArtReadMoreBorder;
			&, a { color: @nlCntArtReadMoreText; }
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntArtReadMoreBackgroundHover !important;
			a { color: @nlCntArtReadMoreText !important; }
		}
		td a:visited { color: @nlCntArtReadMoreText !important; }
	}
}


// contentEtude area
// -------------------------
.contentEtude {
	&, td.expander { background: @nlCntEtuBackground; }
	.newsletterInnerTextColor(@nlCntEtuText);
	.text { color: mix(@nlCntEtuBackground, @nlCntEtuText, 25%); }
	.wrapper:not(.first) { border-left: 1px solid @nlCntEtuBorder; }
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .contentEtude {
		//rajout bordures horizontales
		table.columns td, table.column td { border-bottom: 1px solid @nlCntEtuBorder !important; }
	}
}


// CUSTOM COLORS
// --------------------------------------------------

// Sur-titres
// -------------------------
.preTitle .last {
	color: e("**((secteur_color))**");
	a { .newsletterLinkColor(e("**((secteur_color))**")); }
}


// Hr borders
// -------------------------
hr {
	color: e("**((secteur_color))**");
	-premailer-background: e("**((secteur_color))**");

}
//gestion row avec bordures de séparation
.row.bordered {
	td hr.border { border-bottom: 1px solid e("**((secteur_color))**"); }
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			-premailer-background: e("**((secteur_color))**");
			border-color: e("**((secteur_color_darken12))**");
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: e("**((secteur_color_darken10))**") !important;
		}
	}
}

/*
// DEVELOPPEMENT COLORS
// --------------------------------------------------

// Sur-titres
// -------------------------
.preTitle .last {
	color: @nlPreTitleLast;
	a { .newsletterLinkColor(@nlPreTitleLast); }
}


// Hr borders
// -------------------------
hr {
	color: @nlHrBorder;
	background: @nlHrBorder;
}
//gestion row avec bordures de séparation
.row.bordered {
	td hr.border { border-bottom: 1px solid @nlHrBorder; }
}


// contentALaUne area
// -------------------------
.contentALaUne {
	.readMore table.tiny-button {
		td {
			background: @nlCntUneReadMoreBackground;
			border-color: @nlCntUneReadMoreBorder;
		}

		//hover|visited|active state
		&:hover td,
		&:visited td,
		&:active td {
			background: @nlCntUneReadMoreBackgroundHover !important;
		}
	}
}
*/