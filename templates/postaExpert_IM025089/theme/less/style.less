// theme's imports
@import "import.less";

// additionnal template's style which extends ink's style

//Propriétés mso-* utilisées dans Outlook
//Debug outlook : http://www.verticalresponse.com/blog/its-not-you-its-outlook-the-complete-guide-for-email-marketers/

// LAYOUT
// --------------------------------------------------

h1, h2, h3, h4, h5, h6 { mso-line-height-rule: exactly; }
h1 { line-height: (@headingsFontSizeH1 * 1.1); }
h2 { line-height: (@headingsFontSizeH2 * 1.1); }
h3 { line-height: (@headingsFontSizeH3 * 1.1); }
h4 { line-height: (@headingsFontSizeH4 * 1.1); }
h5 { line-height: (@headingsFontSizeH5 * 1.1); }
h6 { line-height: (@headingsFontSizeH6 * 1.1); }

//réduction tailles titrages en mode mobile
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		body, &, p, td {
			font-size: floor(@baseFontSize * 0.9) !important;
  			line-height: floor(@baseLineHeight * 0.9) !important;
		}

		small {
			font-size: floor(@fontSizeSmall * 0.9) !important;
		}

		h1 {
			font-size: floor(@headingsFontSizeH1 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH1 * 0.9) * 1.1) !important;
		}
		h2 {
			font-size: floor(@headingsFontSizeH2 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH2 * 0.9) * 1.1) !important;
		}
		h3 {
			font-size: floor(@headingsFontSizeH3 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH3 * 0.9) * 1.1) !important;
		}
		h4 {
			font-size: floor(@headingsFontSizeH4 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH4 * 0.9) * 1.1) !important;
		}
		h5 {
			font-size: floor(@headingsFontSizeH5 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH5 * 0.9) * 1.1) !important;
		}
		h6 {
			font-size: floor(@headingsFontSizeH6 * 0.9) !important;
			line-height: (floor(@headingsFontSizeH6 * 0.9) * 1.1) !important;
		}
	}
}

//tous les paragraphes pour Outlook
//cf http://stackoverflow.com/questions/18109812/ms-outlook-email-templates-adding-extra-spacing
p {
	margin: 0px;
	padding: 0px;
	margin-bottom: 0px;
}

//gestion header
.header {
	background-color: @colorPostaExpert1;
	td.decoupe { background-color: @containerBackground; }
	.newsletterInnerTextColor(#ffffff);

	table.columns, table.column {
		table.subWrapper td { padding-bottom: 0px; }
		table.logo {
			background-color: #ffffff;
			table-layout: fixed;
			width: 100px;
			height: 100px;
			-premailer-width: 80;
			-premailer-height: 80;

			td {
				width: 80px;
				height: 70px;
				-premailer-width: 80;
				-premailer-height: 70;
				padding: 15px 10px;
			}
		}
	}
	td.sub-columns {
		&.last {
			vertical-align: bottom;
			.title, .subtitle { color: #ffffff; }
			.title {
				text-transform: uppercase;
				font-weight: 400;
			}
			.subtitle {
				font-weight: 200;
			}
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] .header {
		table.columns, table.column {
			table.subWrapper td { padding-bottom: 0px !important; }
			.right-text-pad, .text-pad-right { padding-left: 0px !important; }
			table.logo {
				width: 100% !important;
				height: 100% !important;
				td {
					width: auto !important;
					height: auto !important;
					padding: unit((15 / 80 * 100), %) unit((10 / 70 * 100), %) !important;
				}
			}
		}
	}
}


//gestion containers avec bordures spécifiques
//calcul dimensions br-cont
@brCont-width: @textPad;
@brCont-height: (@baseLineHeight + @wrapperPad / 2);	// hauteur égale à lineHeight + padding vertical *2
//pour la version collapsée
@brContCollapse-width: @textPadCollapse;
@brContCollapse-height: (floor(@baseLineHeight * 0.9) + @wrapperPadCollapse / 2);	// hauteur égale à lineHeight + padding vertical *2

table.columns, table.column {
	table.subWrapper.bordered {
		background-color: #D6C3E8;

		//remise à zéro du padding par défaut
		td { padding: 0px; }

		//gestion sous-tableau pour le titre et le texte
		td.title-cont,
		td.title-cont td.title-display,
		td.text-cont,
		td.br-cont,
		td[class^="br-t-"] {
			& > table {
				table-layout: fixed;
				width: 100%;
				-premailer-width: 100%;
			}
		}

		td.title-cont {
			//pour décaler la bordure à l'intérieur
			padding-top: (@wrapperPad / 2);
			overflow: visible;

			td.title-display {
				background-color: @colorPostaExpert1;
				vertical-align: middle;
				overflow: hidden;
				td {
					color: #ffffff;
					text-align: center;
					text-transform: uppercase;
					padding: (@wrapperPad / 4) 10px;
				}
			}
		}
		td.text-cont {
			background-color: #6FD67F;
			//pour décaler la bordure à l'intérieur
			// padding: 0 2px 2px 2px;
			td.text-display {
				background-color: #CF8298;
				padding: 5px;
				border-left: 2px solid @colorPostaExpert1;
				border-bottom: 2px solid @colorPostaExpert1;
				border-right: 2px solid @colorPostaExpert1;
			}
		}

		td.filler { background-color: #DFEB7A; }

		//gestion des bordures entourant le titre
		td.br-cont {
			background-color: #C3E8D7;
			line-height: 0px;
			font-size: 0px;
			vertical-align: bottom;

			//application dimenssions
			width: @brCont-width;
			-premailer-width: unit(@brCont-width);

			& > table {
				vertical-align: bottom;
				height: @brCont-height;
				-premailer-height: unit(@brCont-height);
			}

			td.filler {
				//suppression vide des cases
				&, .empty {
					line-height: (@brCont-height / 2);
					font-size: floor(@brCont-height / 2 * .75);
				}
				height: (@brCont-height / 2);
				-premailer-height: unit((@brCont-height / 2));
			}

			td[class^="br-t-"] {
				//suppression vide des cases
				&, .empty {
					line-height: (@brCont-height / 2 - 2px);
					font-size: floor((@brCont-height / 2 - 2px) * .75);
				}
				height: (@brCont-height / 2 - 2px);
				-premailer-height: unit((@brCont-height / 2 - 2px));
			}

			td.br-t-l {
				background-color: #EB7AD0;
				td {
					border-top: 2px solid @colorPostaExpert1;
					border-left: 2px solid @colorPostaExpert1;
				}
			}
			td.br-t-r {
				background-color: #8D7AEB;
				td {
					border-top: 2px solid @colorPostaExpert1;
					border-right: 2px solid @colorPostaExpert1;
				}
			}
		}
	}
}
@media only screen and (max-width: (@containerWidth + @gutterWidth)) {
	table[class="body"] {
		table.columns, table.column {
			table.subWrapper.bordered {
				td { padding: 0px !important; }
				td.title-cont {
					padding-top: (@wrapperPadCollapse / 2) !important;
					td.title-display td { padding: (@wrapperPadCollapse / 4) 10px !important; }
				}
				td.text-cont td.text-display { padding: 5px !important; }
				td.br-cont {
					width: @brContCollapse-width !important;
					& > table { height: @brContCollapse-height !important; }
					td.filler {
						&, .empty {
							line-height: (@brContCollapse-height / 2) !important;
							font-size: floor(@brContCollapse-height / 2 * .75) !important;
						}
						height: (@brContCollapse-height / 2) !important;
					}
					td[class^="br-t-"] {
						//suppression vide des cases
						&, .empty {
							line-height: (@brContCollapse-height / 2 - 2px) !important;
							font-size: floor((@brContCollapse-height / 2 - 2px) * .75) !important;
						}
						height: (@brContCollapse-height / 2 - 2px) !important;
					}
				}
			}
		}
	}
}

